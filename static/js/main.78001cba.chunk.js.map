{"version":3,"sources":["util/FirebaseAPI.js","assets/logo-white.svg","App.tsx","reportWebVitals.ts","store.ts","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","isUserLoggedIn","auth","currentUser","getUserData","callbackSuccess","callbackError","user","collection","doc","uid","get","then","exists","data","toDate","catch","error","signUpWithEmailAndPassword","email","password","createUserWithEmailAndPassword","userCredential","FieldValue","serverTimestamp","set","signInWithEmailAndPassword","signOut","getDistance","targetLatitude","targetLongitude","shopLatitude","shopLongitude","Math","PI","distanceLatitude","distanceLongitude","a","pow","sin","cos","c","asin","sqrt","round","getNearestShops","shops","querySnapshot","forEach","push","shop_id","id","name","distance","photo_url","sort","b","getShopCategories","res","getMostLikedProducts","collectionGroup","mostLikedProducts","total_likes","slice","getShopDetail","shopId","userLocation","longitude","latitude","getProductList","empty","categories","category","createOrder","counterRef","totalSaveRef","orderRef","runTransaction","transaction","counterDoc","totalSaveDoc","incrementNumber","newTotalSave","update","value","Promise","resolve","Homepage","React","lazy","LoginPage","SignupPage","StorePage","OrderPage","TransactionCompletePage","App","useState","isUserLoggedInState","setIsUserLoggedInState","isShowMobileNavLinks","setIsShowMobileNavLinks","burgerNavRef","useRef","isUserLoggedInFirebase","useEffect","loader","style","width","height","display","justifyContent","alignItems","size","type","className","themeColor","position","left","transform","to","src","AppLogoWhite","alt","ref","color","onClick","anchor","current","show","marginLeft","textDecoration","fontWeight","window","location","reload","err","console","path","fallback","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","configureStore","reducer","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.78001cba.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyB8qsuIokGL2JnLg4wEiQLUHIWUUgmTBTY\",\n  authDomain: \"white-tent-c2b34.firebaseapp.com\",\n  projectId: \"white-tent-c2b34\",\n  storageBucket: \"white-tent-c2b34.appspot.com\",\n  messagingSenderId: \"89645161876\",\n  appId: \"1:89645161876:web:ee1a6a38ed8c8ef5db8381\",\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nvar db = firebase.firestore();\n\nexport function isUserLoggedIn() {\n  return firebase.auth().currentUser != null;\n}\n\nexport function getUserData(callbackSuccess, callbackError) {\n  var user = firebase.auth().currentUser;\n\n  if (user == null) {\n    callbackError(\"null\");\n    return;\n  }\n\n  db.collection(\"users\")\n    .doc(user.uid)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        var data = doc.data();\n        data[\"uid\"] = user.uid;\n        data[\"created_at\"] = data[\"created_at\"].toDate();\n        callbackSuccess(data);\n      } else {\n        callbackError(\"User data does not exists\");\n      }\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function signUpWithEmailAndPassword(\n  email,\n  password,\n  data,\n  callbackSuccess,\n  callbackError\n) {\n  firebase\n    .auth()\n    .createUserWithEmailAndPassword(email, password)\n    .then((userCredential) => {\n      // Signed in\n      var user = userCredential.user;\n      data[\"email\"] = email;\n      data[\"created_at\"] = firebase.firestore.FieldValue.serverTimestamp();\n\n      db.collection(\"users\")\n        .doc(user.uid)\n        .set(data)\n        .then(() => {\n          getUserData(callbackSuccess, callbackError);\n        })\n        .catch((error) => {\n          callbackError(error);\n        });\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function signInWithEmailAndPassword(\n  email,\n  password,\n  callbackSuccess,\n  callbackError\n) {\n  firebase\n    .auth()\n    .signInWithEmailAndPassword(email, password)\n    .then((userCredential) => {\n      // Signed in\n      // var user = userCredential.user;\n\n      getUserData(callbackSuccess, callbackError);\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function signOut(callbackSuccess, callbackError) {\n  firebase\n    .auth()\n    .signOut()\n    .then(() => {\n      callbackSuccess();\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\n//Helper function for getNearestShops\n//Reference: https://www.geeksforgeeks.org/program-distance-two-points-earth/\nfunction getDistance(\n  targetLatitude,\n  targetLongitude,\n  shopLatitude,\n  shopLongitude\n) {\n  //converts from degrees to radians\n  targetLatitude = (targetLatitude * Math.PI) / 180;\n  targetLongitude = (targetLongitude * Math.PI) / 180;\n  shopLatitude = (shopLatitude * Math.PI) / 180;\n  shopLongitude = (shopLongitude * Math.PI) / 180;\n\n  // Haversine formula\n  var distanceLatitude = targetLatitude - shopLatitude;\n  var distanceLongitude = targetLongitude - shopLongitude;\n\n  var a =\n    Math.pow(Math.sin(distanceLatitude / 2), 2) +\n    Math.cos(targetLatitude) *\n      Math.cos(shopLatitude) *\n      Math.pow(Math.sin(distanceLongitude / 2), 2);\n\n  var c = 2 * Math.asin(Math.sqrt(a));\n\n  // Radius of earth in kilometers\n  return Math.round(c * 6371 * 10) / 10;\n}\n\nexport function getNearestShops(\n  targetLatitude,\n  targetLongitude,\n  callbackSuccess,\n  callbackError\n) {\n  const shops = [];\n\n  db.collection(\"shop\")\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        var data = doc.data();\n\n        data[\"distance\"] = getDistance(\n          targetLatitude,\n          targetLongitude,\n          data[\"coordinate\"][\"latitude\"],\n          data[\"coordinate\"][\"longitude\"]\n        );\n\n        shops.push({\n          shop_id: doc.id,\n          name: data[\"name\"],\n          distance: data[\"distance\"],\n          photo_url: data[\"photo_url\"],\n        });\n      });\n\n      shops.sort((a, b) => (a[\"distance\"] < b[\"distance\"] ? -1 : 1));\n\n      callbackSuccess(shops);\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function getShopCategories(callbackSuccess, callbackError) {\n  db.collection(\"shop_category\")\n    .get()\n    .then((querySnapshot) => {\n      const res = {};\n      querySnapshot.forEach((doc) => {\n        res[doc.id] = doc.data();\n      });\n      callbackSuccess(res);\n    })\n    .catch((error) => callbackError(error));\n}\n\nexport function getMostLikedProducts(callbackSuccess, callbackError) {\n  db.collectionGroup(\"products\")\n    .get()\n    .then((querySnapshot) => {\n      const mostLikedProducts = [];\n      querySnapshot.forEach((doc) => {\n        mostLikedProducts.push(doc.data());\n      });\n      // Sort from most likes to least likes\n      mostLikedProducts.sort((a, b) => {\n        const aTotalLikes = a.total_likes ?? -1;\n        const bTotalLikes = b.total_likes ?? -1;\n        return aTotalLikes > bTotalLikes ? -1 : 1;\n      });\n\n      // Return only 10 most likes products\n      callbackSuccess(mostLikedProducts.slice(0, 10));\n    })\n    .catch((error) => callbackError(error));\n}\n\nexport function getShopsByName(target, callbackSuccess, callbackError) {\n  const shops = [];\n\n  db.collection(\"shop\")\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        var data = doc.data();\n\n        if (data[\"name\"].toLowerCase().includes(target.toLowerCase())) {\n          shops.push({\n            shop_id: doc.id,\n            name: data[\"name\"],\n            photo_url: data[\"photo_url\"],\n          });\n        }\n      });\n\n      callbackSuccess(shops);\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function getShopDetail(\n  shopId,\n  userLocation,\n  callbackSuccess,\n  callbackError\n) {\n  db.collection(\"shop\")\n    .doc(shopId)\n    .get()\n    .then((doc) => {\n      if (doc.exists) {\n        const data = doc.data();\n        const { longitude, latitude } = userLocation;\n        const distance = getDistance(\n          latitude,\n          longitude,\n          data[\"coordinate\"][\"latitude\"],\n          data[\"coordinate\"][\"longitude\"]\n        );\n        callbackSuccess({ ...doc.data(), distance });\n      } else {\n        callbackError(\"Error: shop id does not exists\");\n      }\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function getProductList(shopId, callbackSuccess, callbackError) {\n  db.collection(\"shop\")\n    .doc(shopId)\n    .collection(\"products\")\n    .get()\n    .then((querySnapshot) => {\n      if (!querySnapshot.empty) {\n        var categories = {};\n\n        querySnapshot.forEach((doc) => {\n          var data = doc.data();\n          data[\"product_id\"] = doc.id;\n          data[\"categories\"].forEach((category) => {\n            if (!(category in categories)) {\n              categories[category] = [];\n            }\n\n            categories[category].push(data);\n          });\n        });\n\n        callbackSuccess(categories);\n      } else {\n        callbackError(\n          \"Error: shop id does not exists or there are no products\"\n        );\n      }\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function createOrder(data, callbackSuccess, callbackError) {\n  var user = firebase.auth().currentUser;\n\n  if (user == null) {\n    callbackError(\"Error: User not logged in\");\n    return;\n  }\n\n  var counterRef = db.collection(\"counter\").doc(\"order\");\n  var totalSaveRef = db.collection(\"counter\").doc(\"total_save\");\n  var orderRef = db.collection(\"users\").doc(user.uid).collection(\"order\").doc();\n\n  db.runTransaction(async (transaction) => {\n    var counterDoc = await transaction.get(counterRef);\n    var totalSaveDoc = await transaction.get(totalSaveRef);\n\n    var incrementNumber = counterDoc.data()[\"value\"] + 1;\n    var newTotalSave = totalSaveDoc.data()[\"value\"] + data[\"total_save\"];\n\n    data[\"order_id\"] = `WT_${incrementNumber}`;\n    data[\"created_at\"] = firebase.firestore.FieldValue.serverTimestamp();\n    data[\"status\"] = \"active\";\n\n    transaction.set(orderRef, data);\n    transaction.update(counterRef, { value: incrementNumber });\n    transaction.update(totalSaveRef, { value: newTotalSave });\n\n    return Promise.resolve(true);\n  })\n    .then(() => {\n      orderRef\n        .get()\n        .then((doc) => {\n          var data = doc.data();\n          data[\"created_at\"] = data[\"created_at\"].toDate();\n          callbackSuccess(data);\n        })\n        .catch((error) => {\n          callbackError(error);\n        });\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport function getShopsByCategoryName(\n  categoryName,\n  callbackSuccess,\n  callbackError\n) {\n  const shops = [];\n\n  db.collection(\"shop\")\n    .where(\"categories\", \"array-contains\", categoryName)\n    .get()\n    .then((querySnapshot) => {\n      querySnapshot.forEach((doc) => {\n        var data = doc.data();\n\n        shops.push({\n          shop_id: doc.id,\n          name: data[\"name\"],\n          photo_url: data[\"photo_url\"],\n          categories: data[\"categories\"],\n        });\n      });\n\n      callbackSuccess(shops);\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n\nexport async function getJsonFile() {\n  const whiteTentData = {\n    shops: [],\n    orders: [],\n  };\n\n  const shops = await db.collection(\"shop\").get();\n\n  for (let i in shops.docs) {\n    let doc = shops.docs[i];\n    let data = doc.data();\n\n    let shop = {\n      categories: data[\"categories\"],\n      name: data[\"name\"],\n      total_likes: parseInt(data[\"total_likes\"]),\n    };\n\n    const products = await db\n      .collection(\"shop\")\n      .doc(doc.id)\n      .collection(\"products\")\n      .get();\n\n    shop[\"products\"] = [];\n\n    products.forEach((doc) => {\n      let data = doc.data();\n\n      let discount =\n        (data[\"original_price\"] - data[\"discount_price\"]) /\n        data[\"original_price\"];\n      discount = Math.round(discount * 100) / 100;\n\n      shop[\"products\"].push({\n        name: data[\"name\"],\n        discount_price: data[\"discount_price\"],\n        original_price: data[\"original_price\"],\n        discount: discount,\n        categories: data[\"categories\"],\n      });\n    });\n\n    const orders = await db\n      .collectionGroup(\"order\")\n      .where(\"shop_id\", \"==\", doc.id)\n      .get();\n\n    shop[\"total_transaction\"] = orders.size;\n\n    whiteTentData[\"shops\"].push(shop);\n  }\n\n  const orders = await db.collectionGroup(\"order\").get();\n\n  orders.forEach((doc) => {\n    let data = doc.data();\n\n    whiteTentData[\"orders\"].push({\n      shop_id: data[\"shop_id\"],\n      total_price: data[\"total_price\"],\n      status: data[\"status\"],\n    });\n  });\n\n  const fs = require(\"fs\");\n  fs.writeFileSync(\"white_tent_data.json\", JSON.stringify(whiteTentData));\n}\n\nexport function getTotalSaveTransaction(callbackSuccess, callbackError) {\n  db.collection(\"counter\")\n    .doc(\"total_save\")\n    .get()\n    .then((doc) => {\n      callbackSuccess({\n        total_save: doc.data()[\"value\"],\n      });\n    })\n    .catch((error) => {\n      callbackError(error);\n    });\n}\n","export default __webpack_public_path__ + \"static/media/logo-white.02d4cb1e.svg\";","import React, { Suspense, useEffect, useRef, useState } from \"react\";\nimport { isUserLoggedIn, signOut } from \"util/FirebaseAPI\";\n\nimport \"./App.scss\";\nimport \"@progress/kendo-theme-material/dist/all.css\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport {\n  AppBar,\n  AppBarSection,\n  AppBarSpacer,\n} from \"@progress/kendo-react-layout\";\nimport { Popup } from \"@progress/kendo-react-popup\";\nimport { Loader } from \"@progress/kendo-react-indicators\";\n\nimport AppLogoWhite from \"assets/logo-white.svg\";\n\nconst Homepage = React.lazy(() => import(\"containers/Homepage\"));\nconst LoginPage = React.lazy(() => import(\"containers/LoginPage\"));\nconst SignupPage = React.lazy(() => import(\"containers/SignupPage\"));\nconst StorePage = React.lazy(() => import(\"containers/StorePage\"));\nconst OrderPage = React.lazy(() => import(\"containers/OrderPage\"));\nconst TransactionCompletePage = React.lazy(\n  () => import(\"containers/TransactionCompletePage\")\n);\n\nfunction App() {\n  const [isUserLoggedInState, setIsUserLoggedInState] = useState(false);\n  const [isShowMobileNavLinks, setIsShowMobileNavLinks] = useState(false);\n  const burgerNavRef = useRef(null);\n  const toggleMobileNavLinks = () => {\n    setIsShowMobileNavLinks(!isShowMobileNavLinks);\n  };\n\n  const isUserLoggedInFirebase = isUserLoggedIn();\n\n  useEffect(() => {\n    setIsUserLoggedInState(isUserLoggedInFirebase);\n  }, [isUserLoggedInFirebase]);\n\n  const loader = (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"50vh\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Loader size={\"large\"} type={\"infinite-spinner\"} />\n    </div>\n  );\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <AppBar themeColor=\"dark\">\n          <AppBarSection\n            style={{\n              position: \"absolute\",\n              left: \"50%\",\n              transform: \"translate(-50%)\",\n            }}\n          >\n            <Link to=\"/\" style={{ height: \"24px\" }}>\n              <img src={AppLogoWhite} alt=\"whitetent-logo-white\"></img>\n            </Link>\n          </AppBarSection>\n\n          <AppBarSpacer />\n          <div className=\"nav-links-mobile\">\n            <AppBarSection>\n              <button\n                ref={burgerNavRef}\n                className=\"k-button k-button-clear\"\n                style={{ color: \"white\" }}\n                onClick={toggleMobileNavLinks}\n              >\n                <span className=\"k-icon k-i-menu\" />\n              </button>\n              <Popup\n                anchor={burgerNavRef.current}\n                show={isShowMobileNavLinks}\n                style={{\n                  marginLeft: -10,\n                }}\n              >\n                <div className=\"popup-content\">\n                  {!isUserLoggedInState ? (\n                    <>\n                      <div className=\"popup-nav-link\">\n                        <Link to=\"/login\" style={{ textDecoration: \"none\" }}>\n                          Login\n                        </Link>\n                      </div>\n                      <div className=\"popup-nav-link\">\n                        <Link to=\"/signup\" style={{ textDecoration: \"none\" }}>\n                          Signup\n                        </Link>\n                      </div>\n                    </>\n                  ) : (\n                    <>\n                      <div className=\"popup-nav-link\">\n                        <Link to=\"/login\" style={{ textDecoration: \"none\" }}>\n                          Shops\n                        </Link>\n                      </div>\n                      <div className=\"popup-nav-link\">\n                        <Link to=\"/login\" style={{ textDecoration: \"none\" }}>\n                          Favourites\n                        </Link>\n                      </div>\n                      <div\n                        className=\"popup-nav-link\"\n                        style={{ fontWeight: \"bold\" }}\n                        onClick={() => {\n                          signOut(\n                            (res: any) => {\n                              window.location.reload();\n                            },\n                            (err: any) => {\n                              console.error(err);\n                            }\n                          );\n                        }}\n                      >\n                        Logout\n                      </div>\n                    </>\n                  )}\n                </div>\n              </Popup>\n            </AppBarSection>\n          </div>\n          <div className=\"nav-links\">\n            {!isUserLoggedInState ? (\n              <>\n                <AppBarSection>\n                  <ul>\n                    <li>\n                      <Link\n                        to=\"/login\"\n                        style={{ color: \"white\", textDecoration: \"none\" }}\n                      >\n                        Login\n                      </Link>\n                    </li>\n                  </ul>\n                </AppBarSection>\n                <AppBarSection>\n                  <span className=\"k-appbar-separator\" />\n                </AppBarSection>\n\n                <AppBarSection>\n                  <ul>\n                    <li>\n                      <Link\n                        to=\"/signup\"\n                        style={{ color: \"white\", textDecoration: \"none\" }}\n                      >\n                        Signup\n                      </Link>\n                    </li>\n                  </ul>\n                </AppBarSection>\n              </>\n            ) : (\n              <>\n                <AppBarSection>\n                  <ul>\n                    <li>\n                      <Link\n                        to=\"/shops\"\n                        style={{ color: \"white\", textDecoration: \"none\" }}\n                      >\n                        Shops\n                      </Link>\n                    </li>\n                  </ul>\n                </AppBarSection>\n                <AppBarSection>\n                  <span className=\"k-appbar-separator\" />\n                </AppBarSection>\n                <AppBarSection>\n                  <ul>\n                    <li>\n                      <Link\n                        to=\"/favourites\"\n                        style={{ color: \"white\", textDecoration: \"none\" }}\n                      >\n                        Favourites\n                      </Link>\n                    </li>\n                  </ul>\n                </AppBarSection>\n              </>\n            )}\n          </div>\n        </AppBar>\n        <div>\n          {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n          <Switch>\n            <Route path=\"/login\">\n              <Suspense fallback={loader}>\n                <LoginPage />\n              </Suspense>\n            </Route>\n            <Route path=\"/signup\">\n              <Suspense fallback={loader}>\n                <SignupPage />\n              </Suspense>\n            </Route>\n            <Route path=\"/store/:id\">\n              <Suspense fallback={loader}>\n                <StorePage />\n              </Suspense>\n            </Route>\n            <Route path=\"/order/:id\">\n              <Suspense fallback={loader}>\n                <OrderPage />\n              </Suspense>\n            </Route>\n            <Route path=\"/transaction/:id\">\n              <Suspense fallback={loader}>\n                <TransactionCompletePage />\n              </Suspense>\n            </Route>\n            <Route path=\"/\" exact>\n              <Suspense fallback={loader}>\n                <Homepage />\n              </Suspense>\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nexport default configureStore({\n  reducer: {},\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}